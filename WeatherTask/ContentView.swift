//
//  ContentView.swift
//  WeatherTask
//
//  Created by Dimitar Kolev on 9.08.24.
//

import SwiftUI

struct ContentView: View {
    var testDataString = "{\"latitude\":42.6875,\"longitude\":23.3125,\"generationtime_ms\":0.07390975952148438,\"utc_offset_seconds\":0,\"timezone\":\"GMT\",\"timezone_abbreviation\":\"GMT\",\"elevation\":548.0,\"hourly_units\":{\"time\":\"iso8601\",\"temperature_2m\":\"Â°C\",\"weathercode\":\"wmo code\",\"windspeed_10m\":\"km/h\"},\"hourly\":{\"time\":[\"2024-08-09T00:00\",\"2024-08-09T01:00\",\"2024-08-09T02:00\",\"2024-08-09T03:00\",\"2024-08-09T04:00\",\"2024-08-09T05:00\",\"2024-08-09T06:00\",\"2024-08-09T07:00\",\"2024-08-09T08:00\",\"2024-08-09T09:00\",\"2024-08-09T10:00\",\"2024-08-09T11:00\",\"2024-08-09T12:00\",\"2024-08-09T13:00\",\"2024-08-09T14:00\",\"2024-08-09T15:00\",\"2024-08-09T16:00\",\"2024-08-09T17:00\",\"2024-08-09T18:00\",\"2024-08-09T19:00\",\"2024-08-09T20:00\",\"2024-08-09T21:00\",\"2024-08-09T22:00\",\"2024-08-09T23:00\",\"2024-08-10T00:00\",\"2024-08-10T01:00\",\"2024-08-10T02:00\",\"2024-08-10T03:00\",\"2024-08-10T04:00\",\"2024-08-10T05:00\",\"2024-08-10T06:00\",\"2024-08-10T07:00\",\"2024-08-10T08:00\",\"2024-08-10T09:00\",\"2024-08-10T10:00\",\"2024-08-10T11:00\",\"2024-08-10T12:00\",\"2024-08-10T13:00\",\"2024-08-10T14:00\",\"2024-08-10T15:00\",\"2024-08-10T16:00\",\"2024-08-10T17:00\",\"2024-08-10T18:00\",\"2024-08-10T19:00\",\"2024-08-10T20:00\",\"2024-08-10T21:00\",\"2024-08-10T22:00\",\"2024-08-10T23:00\",\"2024-08-11T00:00\",\"2024-08-11T01:00\",\"2024-08-11T02:00\",\"2024-08-11T03:00\",\"2024-08-11T04:00\",\"2024-08-11T05:00\",\"2024-08-11T06:00\",\"2024-08-11T07:00\",\"2024-08-11T08:00\",\"2024-08-11T09:00\",\"2024-08-11T10:00\",\"2024-08-11T11:00\",\"2024-08-11T12:00\",\"2024-08-11T13:00\",\"2024-08-11T14:00\",\"2024-08-11T15:00\",\"2024-08-11T16:00\",\"2024-08-11T17:00\",\"2024-08-11T18:00\",\"2024-08-11T19:00\",\"2024-08-11T20:00\",\"2024-08-11T21:00\",\"2024-08-11T22:00\",\"2024-08-11T23:00\",\"2024-08-12T00:00\",\"2024-08-12T01:00\",\"2024-08-12T02:00\",\"2024-08-12T03:00\",\"2024-08-12T04:00\",\"2024-08-12T05:00\",\"2024-08-12T06:00\",\"2024-08-12T07:00\",\"2024-08-12T08:00\",\"2024-08-12T09:00\",\"2024-08-12T10:00\",\"2024-08-12T11:00\",\"2024-08-12T12:00\",\"2024-08-12T13:00\",\"2024-08-12T14:00\",\"2024-08-12T15:00\",\"2024-08-12T16:00\",\"2024-08-12T17:00\",\"2024-08-12T18:00\",\"2024-08-12T19:00\",\"2024-08-12T20:00\",\"2024-08-12T21:00\",\"2024-08-12T22:00\",\"2024-08-12T23:00\",\"2024-08-13T00:00\",\"2024-08-13T01:00\",\"2024-08-13T02:00\",\"2024-08-13T03:00\",\"2024-08-13T04:00\",\"2024-08-13T05:00\",\"2024-08-13T06:00\",\"2024-08-13T07:00\",\"2024-08-13T08:00\",\"2024-08-13T09:00\",\"2024-08-13T10:00\",\"2024-08-13T11:00\",\"2024-08-13T12:00\",\"2024-08-13T13:00\",\"2024-08-13T14:00\",\"2024-08-13T15:00\",\"2024-08-13T16:00\",\"2024-08-13T17:00\",\"2024-08-13T18:00\",\"2024-08-13T19:00\",\"2024-08-13T20:00\",\"2024-08-13T21:00\",\"2024-08-13T22:00\",\"2024-08-13T23:00\",\"2024-08-14T00:00\",\"2024-08-14T01:00\",\"2024-08-14T02:00\",\"2024-08-14T03:00\",\"2024-08-14T04:00\",\"2024-08-14T05:00\",\"2024-08-14T06:00\",\"2024-08-14T07:00\",\"2024-08-14T08:00\",\"2024-08-14T09:00\",\"2024-08-14T10:00\",\"2024-08-14T11:00\",\"2024-08-14T12:00\",\"2024-08-14T13:00\",\"2024-08-14T14:00\",\"2024-08-14T15:00\",\"2024-08-14T16:00\",\"2024-08-14T17:00\",\"2024-08-14T18:00\",\"2024-08-14T19:00\",\"2024-08-14T20:00\",\"2024-08-14T21:00\",\"2024-08-14T22:00\",\"2024-08-14T23:00\",\"2024-08-15T00:00\",\"2024-08-15T01:00\",\"2024-08-15T02:00\",\"2024-08-15T03:00\",\"2024-08-15T04:00\",\"2024-08-15T05:00\",\"2024-08-15T06:00\",\"2024-08-15T07:00\",\"2024-08-15T08:00\",\"2024-08-15T09:00\",\"2024-08-15T10:00\",\"2024-08-15T11:00\",\"2024-08-15T12:00\",\"2024-08-15T13:00\",\"2024-08-15T14:00\",\"2024-08-15T15:00\",\"2024-08-15T16:00\",\"2024-08-15T17:00\",\"2024-08-15T18:00\",\"2024-08-15T19:00\",\"2024-08-15T20:00\",\"2024-08-15T21:00\",\"2024-08-15T22:00\",\"2024-08-15T23:00\"],\"temperature_2m\":[21.2,20.4,20.0,19.3,19.1,20.1,21.4,23.6,26.1,28.1,28.8,29.0,28.3,28.6,28.5,28.5,28.0,26.9,25.3,24.4,23.5,22.9,22.1,21.4,20.7,20.3,19.9,19.7,19.3,20.3,22.2,24.0,25.7,26.9,27.9,29.1,29.9,30.1,30.0,29.3,28.5,27.4,25.9,25.0,23.6,21.9,21.0,20.4,20.0,19.4,18.9,18.3,18.0,19.0,21.1,23.4,26.0,28.1,29.5,30.4,31.1,31.4,31.3,30.9,30.2,28.9,27.0,25.4,24.3,23.4,22.4,21.5,20.7,20.2,19.7,19.3,18.9,19.6,21.1,23.5,26.5,29.0,30.7,31.9,32.7,33.2,33.4,33.0,31.8,30.1,28.5,27.1,25.9,24.8,23.8,23.1,22.4,21.6,21.0,20.8,21.1,21.8,23.1,25.5,28.5,31.0,32.7,33.9,34.8,35.2,35.3,34.8,33.4,31.6,29.9,28.6,27.5,26.5,25.4,24.4,23.7,21.9,20.9,20.5,20.8,21.6,22.9,25.0,27.5,29.7,31.4,32.8,33.6,33.7,33.3,32.5,31.2,29.5,27.9,26.4,25.0,23.8,23.1,22.7,22.1,21.1,20.1,19.7,20.4,21.7,23.4,25.5,27.9,30.0,31.7,33.1,33.9,33.6,32.5,31.4,30.2,29.0,27.6,26.1,24.6,23.3,22.5,21.9],\"weathercode\":[3,2,2,2,1,1,1,1,1,2,3,3,2,2,2,2,2,1,2,2,3,2,2,0,2,2,2,0,0,0,0,0,0,1,2,2,2,2,2,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,3,3,3,3,3,3,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,80,80,80,3,3,3,1,1,1,1,1,1,0,0],\"windspeed_10m\":[0.8,1.1,1.4,1.5,2.3,2.3,2.7,1.8,1.8,2.8,4.0,9.8,7.6,9.1,6.4,5.5,7.9,6.0,4.6,1.1,2.6,2.6,4.3,4.6,4.9,4.5,5.2,5.3,5.8,6.0,7.2,8.9,8.2,7.1,5.5,7.4,10.5,9.0,13.2,11.0,10.0,6.3,1.5,1.8,5.2,3.4,3.1,3.3,2.8,2.6,1.9,1.1,1.4,0.4,1.1,2.5,2.8,5.8,6.1,6.3,6.9,9.4,8.7,7.9,8.9,7.8,4.8,5.2,4.7,3.6,2.9,2.4,2.8,2.4,2.2,1.8,0.8,2.3,2.6,4.6,7.2,9.2,10.2,10.8,10.7,10.1,9.0,8.0,7.2,6.9,6.8,6.2,5.1,4.3,3.0,1.5,0.7,1.1,1.8,2.5,1.8,0.8,1.9,2.8,3.8,4.7,5.3,6.2,7.0,8.7,10.8,11.3,9.5,6.9,5.2,4.7,4.1,4.1,5.7,8.6,10.8,5.8,5.0,4.8,6.0,7.4,8.4,8.3,7.8,7.3,6.8,6.9,7.2,8.2,9.8,10.4,9.4,7.6,5.8,4.7,3.6,3.3,3.8,5.3,6.3,6.2,5.2,4.8,4.7,5.1,5.4,5.4,5.1,4.7,3.3,2.3,1.9,2.2,5.2,7.1,6.4,4.3,2.9,2.3,2.3,2.5,2.6,2.9]}}";
    
    private var weatherData: [String:LocationWeatherData];
    private var selectedCity: String;
    init() {
        let locationWeatherData = LocationWeatherData(jsonString: self.testDataString);
        self.selectedCity = "Sofia";
        self.weatherData = [:];
        self.weatherData [selectedCity] = locationWeatherData;
    }
    var body: some View {
        VStack {
            Text(selectedCity)
                .font(.system(size: 36,weight: .medium))
                .foregroundStyle(.blue)
                .padding()
            Text("Latitude: \(weatherData[selectedCity]?.latitude ?? 0.0)")
                .font(.system(size: 24, weight: .medium))
                .foregroundColor(.blue)
            Text("Longtitude: \(weatherData[selectedCity]?.longitude ?? 0.0)")
                .font(.system(size: 24, weight: .medium))
                .foregroundColor(.blue)
            Text("Elevation: \(weatherData[selectedCity]?.elevation ?? 0.0)")
                .font(.system(size: 24, weight: .medium))
                .foregroundColor(.blue)
            WeatherList(hourlyDataArray: weatherData[selectedCity]?.hourly ?? [],temperatureUnit: weatherData[selectedCity]?.temperatureUnits ?? "",speedUnit: weatherData[selectedCity]?.speedUnits ?? "");
        }
        Spacer ()
    }
}

#Preview {
    ContentView()
}

